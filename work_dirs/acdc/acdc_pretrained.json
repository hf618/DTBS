{"log_config": {"interval": 50, "hooks": [{"type": "TextLoggerHook", "by_epoch": false}]}, "dist_params": {"backend": "nccl"}, "log_level": "INFO", "load_from": null, "resume_from": null, "workflow": [["train", 1]], "cudnn_benchmark": true, "norm_cfg": {"type": "BN", "requires_grad": true}, "find_unused_parameters": true, "model": {"type": "EncoderDecoder", "pretrained": "pretrained/mit_b5.pth", "backbone": {"type": "mit_b5", "style": "pytorch"}, "decode_head": {"type": "DAFormerHead", "in_channels": [64, 128, 320, 512], "in_index": [0, 1, 2, 3], "channels": 256, "dropout_ratio": 0.1, "num_classes": 19, "norm_cfg": {"type": "BN", "requires_grad": true}, "align_corners": false, "decoder_params": {"embed_dims": 256, "embed_cfg": {"type": "mlp", "act_cfg": null, "norm_cfg": null}, "embed_neck_cfg": {"type": "mlp", "act_cfg": null, "norm_cfg": null}, "fusion_cfg": {"type": "aspp", "sep": true, "dilations": [1, 6, 12, 18], "pool": false, "act_cfg": {"type": "ReLU"}, "norm_cfg": {"type": "BN", "requires_grad": true}}}, "loss_decode": {"type": "CrossEntropyLoss", "use_sigmoid": false, "loss_weight": 1.0}}, "train_cfg": {"work_dir": "work_dirs/local-basic/221230_2237_cs2acdc_uda_warm_fdthings_rcs_croppl_a999_daformer_mitb5_s0_test_FDA2_a2e46"}, "test_cfg": {"mode": "whole"}}, "img_norm_cfg": {"mean": [123.675, 116.28, 103.53], "std": [58.395, 57.12, 57.375], "to_rgb": true}, "crop_size": [512, 512], "cityscapes_train_pipeline": [{"type": "LoadImageFromFile"}, {"type": "LoadAnnotations"}, {"type": "Resize", "img_scale": [1024, 512]}, {"type": "RandomCrop", "crop_size": [512, 512], "cat_max_ratio": 0.75}, {"type": "RandomFlip", "prob": 0.5}, {"type": "Normalize", "mean": [123.675, 116.28, 103.53], "std": [58.395, 57.12, 57.375], "to_rgb": true}, {"type": "Pad", "size": [512, 512], "pad_val": 0, "seg_pad_val": 255}, {"type": "DefaultFormatBundle"}, {"type": "Collect", "keys": ["img", "gt_semantic_seg"]}], "acdc_train_pipeline": [{"type": "LoadImageFromFile"}, {"type": "Resize", "img_scale": [960, 540]}, {"type": "RandomCrop", "crop_size": [512, 512]}, {"type": "RandomFlip", "prob": 0.5}, {"type": "Normalize", "mean": [123.675, 116.28, 103.53], "std": [58.395, 57.12, 57.375], "to_rgb": true}, {"type": "Pad", "size": [512, 512], "pad_val": 0, "seg_pad_val": 255}, {"type": "DefaultFormatBundle"}, {"type": "Collect", "keys": ["img"]}], "test_pipeline": [{"type": "LoadImageFromFile"}, {"type": "MultiScaleFlipAug", "img_scale": [960, 540], "flip": false, "transforms": [{"type": "Resize", "keep_ratio": true}, {"type": "RandomFlip"}, {"type": "Normalize", "mean": [123.675, 116.28, 103.53], "std": [58.395, 57.12, 57.375], "to_rgb": true}, {"type": "ImageToTensor", "keys": ["img"]}, {"type": "Collect", "keys": ["img"]}]}], "data": {"samples_per_gpu": 2, "workers_per_gpu": 4, "train": {"type": "UDADataset", "source": {"type": "CityscapesDataset", "data_root": "data/cityscapes/", "img_dir": "leftImg8bit/train", "ann_dir": "gtFine/train", "pipeline": [{"type": "LoadImageFromFile"}, {"type": "LoadAnnotations"}, {"type": "Resize", "img_scale": [1024, 512]}, {"type": "RandomCrop", "crop_size": [512, 512], "cat_max_ratio": 0.75}, {"type": "RandomFlip", "prob": 0.5}, {"type": "Normalize", "mean": [123.675, 116.28, 103.53], "std": [58.395, 57.12, 57.375], "to_rgb": true}, {"type": "Pad", "size": [512, 512], "pad_val": 0, "seg_pad_val": 255}, {"type": "DefaultFormatBundle"}, {"type": "Collect", "keys": ["img", "gt_semantic_seg"]}]}, "target_night": {"type": "ACDCDataset_night", "data_root": "data/acdc/", "img_dir": "rgb_anon/night/train", "ann_dir": "gt/night/train", "pipeline": [{"type": "LoadImageFromFile"}, {"type": "Resize", "img_scale": [960, 540]}, {"type": "RandomCrop", "crop_size": [512, 512]}, {"type": "RandomFlip", "prob": 0.5}, {"type": "Normalize", "mean": [123.675, 116.28, 103.53], "std": [58.395, 57.12, 57.375], "to_rgb": true}, {"type": "Pad", "size": [512, 512], "pad_val": 0, "seg_pad_val": 255}, {"type": "DefaultFormatBundle"}, {"type": "Collect", "keys": ["img"]}]}, "target_day": {"type": "ACDCDataset_day", "data_root": "data/acdc/", "img_dir": "rgb_anon/night/train_ref", "ann_dir": "gt/night/train", "pipeline": [{"type": "LoadImageFromFile"}, {"type": "Resize", "img_scale": [960, 540]}, {"type": "RandomCrop", "crop_size": [512, 512]}, {"type": "RandomFlip", "prob": 0.5}, {"type": "Normalize", "mean": [123.675, 116.28, 103.53], "std": [58.395, 57.12, 57.375], "to_rgb": true}, {"type": "Pad", "size": [512, 512], "pad_val": 0, "seg_pad_val": 255}, {"type": "DefaultFormatBundle"}, {"type": "Collect", "keys": ["img"]}]}, "rare_class_sampling": {"min_pixels": 3000, "class_temp": 0.01, "min_crop_ratio": 0.5}}, "val": {"type": "ACDCDataset_night", "data_root": "data/acdc/", "img_dir": "rgb_anon/night/val", "ann_dir": "gt/night/val", "pipeline": [{"type": "LoadImageFromFile"}, {"type": "MultiScaleFlipAug", "img_scale": [960, 540], "flip": false, "transforms": [{"type": "Resize", "keep_ratio": true}, {"type": "RandomFlip"}, {"type": "Normalize", "mean": [123.675, 116.28, 103.53], "std": [58.395, 57.12, 57.375], "to_rgb": true}, {"type": "ImageToTensor", "keys": ["img"]}, {"type": "Collect", "keys": ["img"]}]}]}, "test": {"type": "ACDCDataset_night", "data_root": "data/acdc/", "img_dir": "rgb_anon/night/val", "ann_dir": "gt/night/val", "pipeline": [{"type": "LoadImageFromFile"}, {"type": "MultiScaleFlipAug", "img_scale": [960, 540], "flip": false, "transforms": [{"type": "Resize", "keep_ratio": true}, {"type": "RandomFlip"}, {"type": "Normalize", "mean": [123.675, 116.28, 103.53], "std": [58.395, 57.12, 57.375], "to_rgb": true}, {"type": "ImageToTensor", "keys": ["img"]}, {"type": "Collect", "keys": ["img"]}]}]}}, "uda": {"type": "DACS", "alpha": 0.999, "pseudo_threshold": 0.968, "pseudo_weight_ignore_top": 15, "pseudo_weight_ignore_bottom": 120, "imnet_feature_dist_lambda": 0.005, "imnet_feature_dist_classes": [6, 7, 11, 12, 13, 14, 15, 16, 17, 18], "imnet_feature_dist_scale_min_ratio": 0.75, "mix": "class", "blur": true, "color_jitter_strength": 0.2, "color_jitter_probability": 0.2, "debug_img_interval": 1000, "print_grad_magnitude": false}, "use_ddp_wrapper": true, "optimizer": {"type": "AdamW", "lr": 6e-05, "betas": [0.9, 0.999], "weight_decay": 0.01, "paramwise_cfg": {"custom_keys": {"head": {"lr_mult": 10.0}, "pos_block": {"decay_mult": 0.0}, "norm": {"decay_mult": 0.0}}}}, "optimizer_config": null, "lr_config": {"policy": "poly", "warmup": "linear", "warmup_iters": 1500, "warmup_ratio": 1e-06, "power": 1.0, "min_lr": 0.0, "by_epoch": false}, "seed": 0, "n_gpus": 1, "runner": {"type": "IterBasedRunner", "max_iters": 40000}, "checkpoint_config": {"by_epoch": false, "interval": 40000, "max_keep_ckpts": 1}, "evaluation": {"interval": 1000, "metric": "mIoU"}, "name": "221230_2237_cs2acdc_uda_warm_fdthings_rcs_croppl_a999_daformer_mitb5_s0_test_FDA2_a2e46", "exp": "basic", "name_dataset": "cityscapes2acdc", "name_architecture": "daformer_sepaspp_mitb5", "name_encoder": "mitb5", "name_decoder": "daformer_sepaspp", "name_uda": "dacs_a999_fd_things_rcs0.01_cpl", "name_opt": "adamw_6e-05_pmTrue_poly10warm_1x2_40k", "work_dir": "work_dirs/local-basic/221230_2237_cs2acdc_uda_warm_fdthings_rcs_croppl_a999_daformer_mitb5_s0_test_FDA2_a2e46", "git_rev": "d2677df22649ec4516760f2a9f8be89eb4b8e770", "gpu_ids": [0]}
